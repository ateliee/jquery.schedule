{"version":3,"file":"jq.schedule.min.js","sources":["js/jq.schedule.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\n(function ($) {\n  'use strict';\n\n  var PLUGIN_NAME = 'jqSchedule';\n  var methods = {\n    /**\n     *\n     * @param {string} str\n     * @returns {number}\n     */\n    calcStringTime: function calcStringTime(str) {\n      var slice = str.split(':');\n      var h = Number(slice[0]) * 60 * 60;\n      var i = Number(slice[1]) * 60;\n      return h + i;\n    },\n\n    /**\n     *\n     * @param {number} val\n     * @returns {string}\n     */\n    formatTime: function formatTime(val) {\n      var i1 = val % 3600;\n      var h = '' + Math.floor(val / 36000) + Math.floor(val / 3600 % 10);\n      var i = '' + Math.floor(i1 / 600) + Math.floor(i1 / 60 % 10);\n      return h + ':' + i;\n    },\n\n    /**\n     * 設定データの保存\n     *\n     * @param {Options} data\n     * @returns {*}\n     */\n    _saveSettingData: function _saveSettingData(data) {\n      return this.data(PLUGIN_NAME + 'Setting', data);\n    },\n\n    /**\n     * 設定データの取得\n     *\n     * @returns Options\n     */\n    _loadSettingData: function _loadSettingData() {\n      return this.data(PLUGIN_NAME + 'Setting');\n    },\n\n    /**\n     * 保存データの保存\n     *\n     * @param {SaveData} data\n     * @returns {*}\n     */\n    _saveData: function _saveData(data) {\n      var d = $.extend({\n        tableStartTime: 0,\n        tableEndTime: 0,\n        schedule: [],\n        timeline: []\n      }, data);\n      return this.data(PLUGIN_NAME, d);\n    },\n\n    /**\n     * 保存データの取得\n     *\n     * @returns SaveData\n     */\n    _loadData: function _loadData() {\n      return this.data(PLUGIN_NAME);\n    },\n\n    /**\n     * スケジュールの取得\n     *\n     * @returns ScheduleData[]\n     */\n    scheduleData: function scheduleData() {\n      var $this = $(this);\n\n      var saveData = methods._loadData.apply($this);\n\n      if (saveData) {\n        return saveData.schedule;\n      }\n\n      return [];\n    },\n\n    /**\n     * get timelineData\n     * @returns {any[]}\n     */\n    timelineData: function timelineData() {\n      var $this = $(this);\n\n      var saveData = methods._loadData.apply($this);\n\n      var data = [];\n      var i;\n\n      for (i in saveData.timeline) {\n        data[i] = saveData.timeline[i];\n        data[i].schedule = [];\n      }\n\n      for (i = 0; i < saveData.schedule.length; i++) {\n        var d = saveData.schedule[i];\n\n        if (typeof d.timeline === 'undefined') {\n          continue;\n        }\n\n        if (typeof data[d.timeline] === 'undefined') {\n          continue;\n        }\n\n        data[d.timeline].schedule.push(d);\n      }\n\n      return data;\n    },\n\n    /**\n     * reset data\n     */\n    resetData: function resetData() {\n      return this.each(function () {\n        var $this = $(this);\n\n        var saveData = methods._loadData.apply($this);\n\n        saveData.schedule = [];\n\n        methods._saveData.apply($this, [saveData]);\n\n        $this.find('.sc_bar').remove();\n\n        for (var i in saveData.timeline) {\n          saveData.timeline[i].schedule = [];\n\n          methods._resizeRow.apply($this, [i, 0]);\n        }\n\n        methods._saveData.apply($this, [saveData]);\n      });\n    },\n\n    /**\n     * add schedule data\n     *\n     * @param {number} timeline\n     * @param {object} data\n     * @returns {methods}\n     */\n    addSchedule: function addSchedule(timeline, data) {\n      return this.each(function () {\n        var $this = $(this);\n        var d = {\n          start: data.start,\n          end: data.end,\n          startTime: methods.calcStringTime(data.start),\n          endTime: methods.calcStringTime(data.end),\n          text: data.text,\n          timeline: timeline\n        };\n\n        if (data.data) {\n          d.data = data.data;\n        }\n\n        methods._addScheduleData.apply($this, [timeline, d]);\n\n        methods._resetBarPosition.apply($this, [timeline]);\n      });\n    },\n\n    /**\n     * add schedule data\n     *\n     * @param {number} timeline\n     * @param {object} data\n     * @returns {methods}\n     */\n    addRow: function addRow(timeline, data) {\n      return this.each(function () {\n        var $this = $(this);\n\n        methods._addRow.apply($this, [timeline, data]);\n      });\n    },\n\n    /**\n     * clear row\n     *\n     * @returns {methods}\n     */\n    resetRowData: function resetRowData() {\n      return this.each(function () {\n        var $this = $(this);\n\n        var data = methods._loadData.apply($this);\n\n        data.schedule = [];\n        data.timeline = [];\n\n        methods._saveData.apply($this, [data]);\n\n        $this.find('.sc_bar').remove();\n        $this.find('.timeline').remove();\n        $this.find('.sc_data').height(0);\n      });\n    },\n\n    /**\n     * clear row\n     *\n     * @param {object} data\n     * @returns {methods}\n     */\n    setRows: function setRows(data) {\n      return this.each(function () {\n        var $this = $(this);\n        methods.resetRowData.apply($this, []);\n\n        for (var timeline in data) {\n          methods.addRow.apply($this, [timeline, data[timeline]]);\n        }\n      });\n    },\n\n    /**\n     * switch draggable\n     * @param {boolean} enable\n     */\n    setDraggable: function setDraggable(enable) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        if (enable !== setting.draggable) {\n          setting.draggable = enable;\n\n          methods._saveSettingData.apply($this, setting);\n\n          if (enable) {\n            $this.find('.sc_bar').draggable('enable');\n          } else {\n            $this.find('.sc_bar').draggable('disable');\n          }\n        }\n      });\n    },\n\n    /**\n     * switch resizable\n     * @param {boolean} enable\n     */\n    setResizable: function setResizable(enable) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        if (enable !== setting.resizable) {\n          setting.resizable = enable;\n\n          methods._saveSettingData.apply($this, setting);\n\n          if (enable) {\n            $this.find('.sc_bar').resizable('enable');\n          } else {\n            $this.find('.sc_bar').resizable('disable');\n          }\n        }\n      });\n    },\n\n    /**\n     * 現在のタイムライン番号を取得\n     *\n     * @param node\n     * @param top\n     * @returns {number}\n     */\n    _getTimeLineNumber: function _getTimeLineNumber(node, top) {\n      var $this = $(this);\n\n      var setting = methods._loadSettingData.apply($this);\n\n      var num = 0;\n      var n = 0;\n      var tn = Math.ceil(top / (setting.timeLineY + setting.timeLinePaddingTop + setting.timeLinePaddingBottom));\n\n      for (var i in setting.rows) {\n        var r = setting.rows[i];\n        var tr = 0;\n\n        if (_typeof(r.schedule) === 'object') {\n          tr = r.schedule.length;\n        }\n\n        if (node && node.timeline) {\n          tr++;\n        }\n\n        n += Math.max(tr, 1);\n\n        if (n >= tn) {\n          break;\n        }\n\n        num++;\n      }\n\n      return num;\n    },\n\n    /**\n     * 背景データ追加\n     *\n     * @param {ScheduleData} data\n     */\n    _addScheduleBgData: function _addScheduleBgData(data) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var st = Math.ceil((data.startTime - saveData.tableStartTime) / setting.widthTime);\n        var et = Math.floor((data.endTime - saveData.tableStartTime) / setting.widthTime);\n        var $bar = $('<div class=\"sc_bgBar\"><span class=\"text\"></span></div>');\n        $bar.css({\n          left: st * setting.widthTimeX,\n          top: 0,\n          width: (et - st) * setting.widthTimeX,\n          height: $this.find('.sc_main .timeline').eq(data.timeline).height()\n        });\n\n        if (data.text) {\n          $bar.find('.text').text(data.text);\n        }\n\n        if (data.class) {\n          $bar.addClass(data.class);\n        } // $element.find('.sc_main').append($bar);\n\n\n        $this.find('.sc_main .timeline').eq(data.timeline).append($bar);\n      });\n    },\n\n    /**\n     * スケジュール追加\n     *\n     * @param timeline\n     * @param {ScheduleData} d\n     * @returns {number}\n     */\n    _addScheduleData: function _addScheduleData(timeline, d) {\n      var data = d;\n      data.startTime = data.startTime ? data.startTime : methods.calcStringTime(data.start);\n      data.endTime = data.endTime ? data.endTime : methods.calcStringTime(data.end);\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var st = Math.ceil((data.startTime - saveData.tableStartTime) / setting.widthTime);\n        var et = Math.floor((data.endTime - saveData.tableStartTime) / setting.widthTime);\n        var $bar = $('<div class=\"sc_bar\"><span class=\"head\"><span class=\"time\"></span></span><span class=\"text\"></span></div>');\n        var stext = methods.formatTime(data.startTime);\n        var etext = methods.formatTime(data.endTime);\n\n        var snum = methods._getScheduleCount.apply($this, [data.timeline]);\n\n        $bar.css({\n          left: st * setting.widthTimeX,\n          top: snum * setting.timeLineY + setting.timeLinePaddingTop,\n          width: (et - st) * setting.widthTimeX,\n          height: setting.timeLineY\n        });\n        $bar.find('.time').text(stext + '-' + etext);\n\n        if (data.text) {\n          $bar.find('.text').text(data.text);\n        }\n\n        if (data.class) {\n          $bar.addClass(data.class);\n        }\n\n        var $row = $this.find('.sc_main .timeline').eq(timeline);\n        var $scMain = $this.find('.sc_main');\n        $row.append($bar);\n        saveData.schedule.push(data);\n\n        methods._saveData.apply($this, [saveData]);\n\n        if (setting.onAppendSchedule) {\n          setting.onAppendSchedule.apply($this, [$bar, data]);\n        }\n\n        var key = saveData.schedule.length - 1;\n        $bar.data('sc_key', key);\n        $bar.on('mouseup', function () {\n          if (setting.onClick) {\n            if ($(this).data('dragCheck') !== true && $(this).data('resizeCheck') !== true) {\n              var $n = $(this);\n              var scKey = $n.data('sc_key');\n              setting.onClick.apply($this, [$n, saveData.schedule[scKey]]);\n            }\n          }\n        });\n        var $node = $this.find('.sc_bar');\n        var currentNode = null;\n        $node.draggable({\n          grid: [setting.widthTimeX, 1],\n          containment: $scMain,\n          helper: 'original',\n          start: function start(event, ui) {\n            var node = {};\n            node.node = this;\n            node.offsetTop = ui.position.top;\n            node.offsetLeft = ui.position.left;\n            node.currentTop = ui.position.top;\n            node.currentLeft = ui.position.left;\n            node.timeline = methods._getTimeLineNumber.apply($this, [currentNode, ui.position.top]);\n            node.nowTimeline = node.timeline;\n            currentNode = node;\n          },\n\n          /**\n           *\n           * @param {Event} event\n           * @param {function} ui\n           * @returns {boolean}\n           */\n          drag: function drag(event, ui) {\n            $(this).data('dragCheck', true);\n\n            if (!currentNode) {\n              return false;\n            }\n\n            var $moveNode = $(this);\n            var scKey = $moveNode.data('sc_key');\n\n            var timelineNum = methods._getTimeLineNumber.apply($this, [currentNode, ui.position.top]); // eslint-disable-next-line no-param-reassign\n\n\n            ui.position.left = Math.floor(ui.position.left / setting.widthTimeX) * setting.widthTimeX;\n\n            if (currentNode.nowTimeline !== timelineNum) {\n              // 現在のタイムライン\n              currentNode.nowTimeline = timelineNum;\n            }\n\n            currentNode.currentTop = ui.position.top;\n            currentNode.currentLeft = ui.position.left; // テキスト変更\n\n            methods._rewriteBarText.apply($this, [$moveNode, saveData.schedule[scKey]]);\n\n            return true;\n          },\n          // 要素の移動が終った後の処理\n          stop: function stop() {\n            $(this).data('dragCheck', false);\n            currentNode = null;\n            var $n = $(this);\n            var scKey = $n.data('sc_key');\n            var x = $n.position().left; // var w = $n.width();\n\n            var start = saveData.tableStartTime + Math.floor(x / setting.widthTimeX) * setting.widthTime; // var end = saveData.tableStartTime + (Math.floor((x + w) / setting.widthTimeX) * setting.widthTime);\n\n            var end = start + (saveData.schedule[scKey].endTime - saveData.schedule[scKey].startTime);\n            saveData.schedule[scKey].start = methods.formatTime(start);\n            saveData.schedule[scKey].end = methods.formatTime(end);\n            saveData.schedule[scKey].startTime = start;\n            saveData.schedule[scKey].endTime = end; // コールバックがセットされていたら呼出\n\n            if (setting.onChange) {\n              setting.onChange.apply($this, [$n, saveData.schedule[scKey]]);\n            }\n          }\n        });\n        var resizableHandles = ['e'];\n\n        if (setting.resizableLeft) {\n          resizableHandles.push('w');\n        }\n\n        $node.resizable({\n          handles: resizableHandles.join(','),\n          grid: [setting.widthTimeX, setting.timeLineY - setting.timeBorder],\n          minWidth: setting.widthTimeX,\n          containment: $this.find('.sc_main_scroll'),\n          start: function start() {\n            var $n = $(this);\n            $n.data('resizeCheck', true);\n          },\n          resize: function resize(ev, ui) {\n            // box-sizing: border-box; に対応\n            ui.element.height(ui.size.height);\n            ui.element.width(ui.size.width);\n          },\n          // 要素の移動が終った後の処理\n          stop: function stop() {\n            var $n = $(this);\n            var scKey = $n.data('sc_key');\n            var x = $n.position().left;\n            var w = $n.outerWidth();\n            var start = saveData.tableStartTime + Math.floor(x / setting.widthTimeX) * setting.widthTime;\n            var end = saveData.tableStartTime + Math.floor((x + w) / setting.widthTimeX) * setting.widthTime;\n            var timelineNum = saveData.schedule[scKey].timeline;\n            saveData.schedule[scKey].start = methods.formatTime(start);\n            saveData.schedule[scKey].end = methods.formatTime(end);\n            saveData.schedule[scKey].startTime = start;\n            saveData.schedule[scKey].endTime = end; // 高さ調整\n\n            methods._resetBarPosition.apply($this, [timelineNum]); // テキスト変更\n\n\n            methods._rewriteBarText.apply($this, [$n, saveData.schedule[scKey]]);\n\n            $n.data('resizeCheck', false); // コールバックがセットされていたら呼出\n\n            if (setting.onChange) {\n              setting.onChange.apply($this, [$n, saveData.schedule[scKey]]);\n            }\n          }\n        });\n\n        if (setting.draggable === false) {\n          $node.draggable('disable');\n        }\n\n        if (setting.resizable === false) {\n          $node.resizable('disable');\n        }\n\n        return key;\n      });\n    },\n\n    /**\n     * スケジュール数の取得\n     *\n     * @param {number} n row number\n     * @returns {number}\n     */\n    _getScheduleCount: function _getScheduleCount(n) {\n      var $this = $(this);\n\n      var saveData = methods._loadData.apply($this);\n\n      var num = 0;\n\n      for (var i = 0; i < saveData.schedule.length; i++) {\n        if (saveData.schedule[i].timeline === n) {\n          num++;\n        }\n      }\n\n      return num;\n    },\n\n    /**\n     * add rows\n     *\n     * @param timeline\n     * @param row\n     */\n    _addRow: function _addRow(timeline, row) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var id = $this.find('.sc_main .timeline').length;\n        var html;\n        html = '';\n        html += '<div class=\"timeline\"></div>';\n        var $data = $(html);\n\n        if (row.title) {\n          $data.append('<span class=\"timeline-title\">' + row.title + '</span>');\n        }\n\n        if (row.subtitle) {\n          $data.append('<span class=\"timeline-subtitle\">' + row.subtitle + '</span>');\n        } // event call\n\n\n        if (setting.onInitRow) {\n          setting.onInitRow.apply($this, [$data, row]);\n        }\n\n        $this.find('.sc_data_scroll').append($data);\n        html = '';\n        html += '<div class=\"timeline\"></div>';\n        var $timeline = $(html);\n\n        for (var t = saveData.tableStartTime; t < saveData.tableEndTime; t += setting.widthTime) {\n          var $tl = $('<div class=\"tl\"></div>');\n          $tl.outerWidth(setting.widthTimeX);\n          $tl.data('time', methods.formatTime(t));\n          $tl.data('timeline', timeline);\n          $timeline.append($tl);\n        } // クリックイベント\n        // left click\n\n\n        $timeline.find('.tl').on('click', function () {\n          if (setting.onScheduleClick) {\n            setting.onScheduleClick.apply($this, [this, $(this).data('time'), $(this).data('timeline'), saveData.timeline[$(this).data('timeline')]]);\n          }\n        }); // right click\n\n        $timeline.find('.tl').on('contextmenu', function () {\n          if (setting.onScheduleClick) {\n            setting.onScheduleClick.apply($this, [this, $(this).data('time'), $(this).data('timeline'), saveData.timeline[$(this).data('timeline')]]);\n          }\n\n          return false;\n        });\n        $this.find('.sc_main').append($timeline);\n        saveData.timeline[timeline] = row;\n\n        methods._saveData.apply($this, [saveData]);\n\n        if (row.class && row.class !== '') {\n          $this.find('.sc_data .timeline').eq(id).addClass(row.class);\n          $this.find('.sc_main .timeline').eq(id).addClass(row.class);\n        } // スケジュールタイムライン\n\n\n        if (row.schedule) {\n          for (var i in row.schedule) {\n            var bdata = row.schedule[i];\n            var s = bdata.start ? bdata.start : methods.calcStringTime(bdata.startTime);\n            var e = bdata.end ? bdata.end : methods.calcStringTime(bdata.endTime);\n            var data = {};\n            data.start = s;\n            data.end = e;\n\n            if (bdata.text) {\n              data.text = bdata.text;\n            }\n\n            data.timeline = timeline;\n            data.data = {};\n\n            if (bdata.data) {\n              data.data = bdata.data;\n            }\n\n            methods._addScheduleData.apply($this, [id, data]);\n          }\n        } // 高さの調整\n\n\n        methods._resetBarPosition.apply($this, [id]);\n\n        $this.find('.sc_main .timeline').eq(id).droppable({\n          accept: '.sc_bar',\n          drop: function drop(ev, ui) {\n            var node = ui.draggable;\n            var scKey = node.data('sc_key');\n            var nowTimelineNum = saveData.schedule[scKey].timeline;\n            var timelineNum = $this.find('.sc_main .timeline').index(this); // タイムラインの変更\n\n            saveData.schedule[scKey].timeline = timelineNum;\n            node.appendTo(this); // 高さ調整\n\n            methods._resetBarPosition.apply($this, [nowTimelineNum]);\n\n            methods._resetBarPosition.apply($this, [timelineNum]);\n          }\n        }); // コールバックがセットされていたら呼出\n\n        if (setting.onAppendRow) {\n          $this.find('.sc_main .timeline').eq(id).find('.sc_bar').each(function () {\n            var $n = $(this);\n            var scKey = $n.data('sc_key');\n            setting.onAppendRow.apply($this, [$n, saveData.schedule[scKey]]);\n          });\n        }\n      });\n    },\n\n    /**\n     * テキストの変更\n     *\n     * @param {jQuery} node\n     * @param {Object} data\n     */\n    _rewriteBarText: function _rewriteBarText(node, data) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var x = node.position().left; // var w = node.width();\n\n        var start = saveData.tableStartTime + Math.floor(x / setting.widthTimeX) * setting.widthTime; // var end = saveData.tableStartTime + (Math.floor((x + w) / setting.widthTimeX) * setting.widthTime);\n\n        var end = start + (data.endTime - data.startTime);\n        var html = methods.formatTime(start) + '-' + methods.formatTime(end);\n        $(node).find('.time').html(html);\n      });\n    },\n\n    /**\n     *\n     * @param {Number} n\n     */\n    _resetBarPosition: function _resetBarPosition(n) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var $timeline = $this.find('.sc_main .timeline').eq(n);\n        var $barList = $timeline.find('.sc_bar');\n        var codes = [],\n            check = [];\n        var h = 0;\n        var $e1, $e2;\n        var c1, c2, s1, s2, e1, e2;\n        var i;\n\n        for (i = 0; i < $barList.length; i++) {\n          codes[i] = {\n            code: i,\n            x: $($barList[i]).position().left\n          };\n        }\n\n        codes.sort(function (a, b) {\n          if (a.x < b.x) {\n            return -1;\n          }\n\n          if (a.x > b.x) {\n            return 1;\n          }\n\n          return 0;\n        });\n\n        for (i = 0; i < codes.length; i++) {\n          c1 = codes[i].code;\n          $e1 = $($barList[c1]);\n\n          for (h = 0; h < check.length; h++) {\n            var next = false;\n\n            for (var j = 0; j < check[h].length; j++) {\n              c2 = check[h][j];\n              $e2 = $($barList[c2]);\n              s1 = $e1.position().left;\n              e1 = $e1.position().left + $e1.outerWidth();\n              s2 = $e2.position().left;\n              e2 = $e2.position().left + $e2.outerWidth();\n\n              if (s1 < e2 && e1 > s2) {\n                next = true;\n                continue;\n              }\n            }\n\n            if (!next) {\n              break;\n            }\n          }\n\n          if (!check[h]) {\n            check[h] = [];\n          }\n\n          $e1.css({\n            top: h * setting.timeLineY + setting.timeLinePaddingTop\n          });\n          check[h][check[h].length] = c1;\n        }\n\n        methods._resizeRow.apply($this, [n, check.length]);\n      });\n    },\n\n    /**\n     *\n     * @param n\n     * @param height\n     */\n    _resizeRow: function _resizeRow(n, height) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var h = Math.max(height, 1);\n        var newHeight = h * setting.timeLineY + setting.timeLineBorder + setting.timeLinePaddingTop + setting.timeLinePaddingBottom;\n        var $dataTimeline = $this.find('.sc_data .timeline').eq(n);\n        var $mainTimeline = $this.find('.sc_main .timeline').eq(n);\n        $dataTimeline.outerHeight(newHeight);\n        $mainTimeline.outerHeight(newHeight);\n        $mainTimeline.find('.sc_bgBar').each(function () {\n          $(this).outerHeight($(this).closest('.timeline').outerHeight());\n        });\n        $this.find('.sc_data').outerHeight($this.find('.sc_main_box').outerHeight());\n      });\n    },\n\n    /**\n     * resizeWindow\n     */\n    _resizeWindow: function _resizeWindow() {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var scWidth = $this.width();\n        var scMainWidth = scWidth - setting.dataWidth - setting.verticalScrollbar;\n        var cellNum = Math.floor((saveData.tableEndTime - saveData.tableStartTime) / setting.widthTime);\n        $this.find('.sc_header_cell').width(setting.dataWidth);\n        $this.find('.sc_data,.sc_data_scroll').width(setting.dataWidth);\n        $this.find('.sc_header').width(scMainWidth);\n        $this.find('.sc_main_box').width(scMainWidth);\n        $this.find('.sc_header_scroll').width(setting.widthTimeX * cellNum);\n        $this.find('.sc_main_scroll').width(setting.widthTimeX * cellNum);\n      });\n    },\n\n    /**\n     * move all cells of the right of the specified time line cell\n     *\n     * @param timeline\n     * @param baseTimeLineCell\n     * @param moveWidth\n     */\n    _moveSchedules: function _moveSchedules(timeline, baseTimeLineCell, moveWidth) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var $timeline = $this.find('.sc_main .timeline').eq(timeline);\n        var $barList = $timeline.find('.sc_bar');\n\n        for (var i = 0; i < $barList.length; i++) {\n          var $bar = $($barList[i]);\n\n          if (baseTimeLineCell.position().left <= $bar.position().left) {\n            var v1 = $bar.position().left + setting.widthTimeX * moveWidth;\n            var v2 = Math.floor((saveData.tableEndTime - saveData.tableStartTime) / setting.widthTime) * setting.widthTimeX - $bar.outerWidth();\n            $bar.css({\n              left: Math.max(0, Math.min(v1, v2))\n            });\n            var scKey = $bar.data('sc_key');\n            var start = saveData.tableStartTime + Math.floor($bar.position().left / setting.widthTimeX) * setting.widthTime;\n            var end = start + (saveData.schedule[scKey].end - saveData.schedule[scKey].start);\n            saveData.schedule[scKey].start = methods.formatTime(start);\n            saveData.schedule[scKey].end = methods.formatTime(end);\n            saveData.schedule[scKey].startTime = start;\n            saveData.schedule[scKey].endTime = end;\n\n            methods._rewriteBarText.apply($this, [$bar, saveData.schedule[scKey]]);\n\n            if (setting.onChange) {\n              setting.onChange.apply($this, [$bar, saveData.schedule[scKey]]);\n            }\n          }\n        }\n\n        methods._resetBarPosition.apply($this, [timeline]);\n      });\n    },\n\n    /**\n     * initialize\n     */\n    init: function init(options) {\n      return this.each(function () {\n        var $this = $(this);\n        var config = $.extend({\n          className: 'jq-schedule',\n          rows: {},\n          startTime: '07:00',\n          endTime: '19:30',\n          widthTimeX: 25,\n          // 1cell辺りの幅(px)\n          widthTime: 600,\n          // 区切り時間(秒)\n          timeLineY: 50,\n          // timeline height(px)\n          timeLineBorder: 1,\n          // timeline height border\n          timeBorder: 1,\n          // border width\n          timeLinePaddingTop: 0,\n          timeLinePaddingBottom: 0,\n          headTimeBorder: 1,\n          // time border width\n          dataWidth: 160,\n          // data width\n          verticalScrollbar: 0,\n          // vertical scrollbar width\n          bundleMoveWidth: 1,\n          // width to move all schedules to the right of the clicked time cell\n          draggable: true,\n          resizable: true,\n          resizableLeft: false,\n          // event\n          onInitRow: null,\n          onChange: null,\n          onClick: null,\n          onAppendRow: null,\n          onAppendSchedule: null,\n          onScheduleClick: null\n        }, options);\n\n        methods._saveSettingData.apply($this, [config]);\n\n        var tableStartTime = methods.calcStringTime(config.startTime);\n        var tableEndTime = methods.calcStringTime(config.endTime);\n        tableStartTime -= tableStartTime % config.widthTime;\n        tableEndTime -= tableEndTime % config.widthTime;\n\n        methods._saveData.apply($this, [{\n          tableStartTime: tableStartTime,\n          tableEndTime: tableEndTime\n        }]);\n\n        var html = '' + '<div class=\"sc_menu\">' + '\\n' + '<div class=\"sc_header_cell\"><span>&nbsp;</span></div>' + '\\n' + '<div class=\"sc_header\">' + '\\n' + '<div class=\"sc_header_scroll\"></div>' + '\\n' + '</div>' + '\\n' + '</div>' + '\\n' + '<div class=\"sc_wrapper\">' + '\\n' + '<div class=\"sc_data\">' + '\\n' + '<div class=\"sc_data_scroll\"></div>' + '\\n' + '</div>' + '\\n' + '<div class=\"sc_main_box\">' + '\\n' + '<div class=\"sc_main_scroll\">' + '\\n' + '<div class=\"sc_main\"></div>' + '\\n' + '</div>' + '\\n' + '</div>' + '\\n' + '</div>';\n        $this.append(html);\n        $this.addClass(config.className);\n        $this.find('.sc_main_box').on('scroll', function () {\n          $this.find('.sc_data_scroll').css('top', $(this).scrollTop() * -1);\n          $this.find('.sc_header_scroll').css('left', $(this).scrollLeft() * -1);\n        }); // add time cell\n        // var cellNum = Math.floor((tableEndTime - tableStartTime) / config.widthTime);\n\n        var beforeTime = -1;\n\n        for (var t = tableStartTime; t < tableEndTime; t += config.widthTime) {\n          if (beforeTime < 0 || Math.floor(beforeTime / 3600) !== Math.floor(t / 3600)) {\n            html = '';\n            html += '<div class=\"sc_time\">' + methods.formatTime(t) + '</div>';\n            var $time = $(html);\n            var cn = Number(Math.min(Math.ceil((t + config.widthTime) / 3600) * 3600, tableEndTime) - t);\n            var cellNum = Math.floor(cn / config.widthTime);\n            $time.width(cellNum * config.widthTimeX);\n            $this.find('.sc_header_scroll').append($time);\n            beforeTime = t;\n          }\n        }\n\n        $(window).on('resize', function () {\n          methods._resizeWindow.apply($this);\n        }).trigger('resize'); // addrow\n\n        for (var i in config.rows) {\n          methods._addRow.apply($this, [i, config.rows[i]]);\n        }\n      });\n    }\n  };\n  /**\n   *\n   * @param {Object|string} method\n   * @returns {jQuery|methods|*}\n   */\n  // eslint-disable-next-line no-param-reassign\n\n  $.fn.timeSchedule = function (method) {\n    // Method calling logic\n    if (methods[method]) {\n      return methods[method].apply(this, Array.prototype.slice.call(arguments, 1)); // eslint-disable-next-line no-else-return\n    } else if (_typeof(method) === 'object' || !method) {\n      return methods.init.apply(this, arguments);\n    }\n\n    $.error('Method ' + method + ' does not exist on jQuery.timeSchedule');\n    return this;\n  };\n})(jQuery);"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","PLUGIN_NAME","methods","calcStringTime","str","slice","split","Number","formatTime","val","i1","Math","floor","_saveSettingData","data","this","_loadSettingData","_saveData","d","extend","tableStartTime","tableEndTime","schedule","timeline","_loadData","scheduleData","$this","saveData","apply","timelineData","i","length","push","resetData","each","find","remove","_resizeRow","addSchedule","start","end","startTime","endTime","text","_addScheduleData","_resetBarPosition","addRow","_addRow","resetRowData","height","setRows","setDraggable","enable","setting","draggable","setResizable","resizable","_getTimeLineNumber","node","top","num","n","tn","ceil","timeLineY","timeLinePaddingTop","timeLinePaddingBottom","rows","r","tr","max","_addScheduleBgData","st","widthTime","et","$bar","css","left","widthTimeX","width","eq","class","addClass","append","stext","etext","snum","_getScheduleCount","$row","$scMain","key","onAppendSchedule","$node","on","$n","scKey","onClick","currentNode","resizableHandles","grid","containment","helper","event","ui","offsetTop","position","offsetLeft","currentTop","currentLeft","nowTimeline","drag","$moveNode","timelineNum","_rewriteBarText","stop","x","onChange","resizableLeft","handles","join","timeBorder","minWidth","resize","ev","element","size","w","outerWidth","row","id","html","$data","$timeline","title","subtitle","onInitRow","t","$tl","onScheduleClick","bdata","s","e","droppable","accept","drop","nowTimelineNum","index","appendTo","onAppendRow","$e1","c1","c2","s1","s2","e1","$barList","codes","check","h","code","sort","a","b","next","j","$e2","newHeight","timeLineBorder","$dataTimeline","$mainTimeline","outerHeight","closest","_resizeWindow","scMainWidth","dataWidth","verticalScrollbar","cellNum","_moveSchedules","baseTimeLineCell","moveWidth","v1","v2","min","init","options","$time","config","className","headTimeBorder","bundleMoveWidth","beforeTime","scrollTop","scrollLeft","cn","window","trigger","fn","timeSchedule","method","Array","call","arguments","error","jQuery"],"mappings":"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"}