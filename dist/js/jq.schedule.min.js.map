{"version":3,"file":"jq.schedule.min.js","sources":["js/jq.schedule.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\n(function ($) {\n  'use strict';\n\n  var PLUGIN_NAME = 'jqSchedule';\n  var methods = {\n    /**\n     *\n     * @param {string} str\n     * @returns {number}\n     */\n    calcStringTime: function calcStringTime(str) {\n      var slice = str.split(':');\n      var h = Number(slice[0]) * 60 * 60;\n      var i = Number(slice[1]) * 60;\n      return h + i;\n    },\n\n    /**\n     *\n     * @param {number} val\n     * @returns {string}\n     */\n    formatTime: function formatTime(val) {\n      var i1 = val % 3600;\n      var h = '' + Math.floor(val / 36000) + Math.floor(val / 3600 % 10);\n      var i = '' + Math.floor(i1 / 600) + Math.floor(i1 / 60 % 10);\n      return h + ':' + i;\n    },\n\n    /**\n     * 設定データの保存\n     *\n     * @param {Options} data\n     * @returns {*}\n     */\n    _saveSettingData: function _saveSettingData(data) {\n      return this.data(PLUGIN_NAME + 'Setting', data);\n    },\n\n    /**\n     * 設定データの取得\n     *\n     * @returns Options\n     */\n    _loadSettingData: function _loadSettingData() {\n      return this.data(PLUGIN_NAME + 'Setting');\n    },\n\n    /**\n     * 保存データの保存\n     *\n     * @param {SaveData} data\n     * @returns {*}\n     */\n    _saveData: function _saveData(data) {\n      var d = $.extend({\n        tableStartTime: 0,\n        tableEndTime: 0,\n        schedule: [],\n        timeline: []\n      }, data);\n      return this.data(PLUGIN_NAME, d);\n    },\n\n    /**\n     * 保存データの取得\n     *\n     * @returns SaveData\n     */\n    _loadData: function _loadData() {\n      return this.data(PLUGIN_NAME);\n    },\n\n    /**\n     * スケジュールの取得\n     *\n     * @returns ScheduleData[]\n     */\n    scheduleData: function scheduleData() {\n      var $this = $(this);\n\n      var saveData = methods._loadData.apply($this);\n\n      if (saveData) {\n        return saveData.schedule;\n      }\n\n      return [];\n    },\n\n    /**\n     * get timelineData\n     * @returns {any[]}\n     */\n    timelineData: function timelineData() {\n      var $this = $(this);\n\n      var saveData = methods._loadData.apply($this);\n\n      var data = [];\n      var i;\n\n      for (i in saveData.timeline) {\n        data[i] = saveData.timeline[i];\n        data[i].schedule = [];\n      }\n\n      for (i in saveData.schedule) {\n        var d = saveData.schedule[i];\n\n        if (typeof d.timeline === 'undefined') {\n          continue;\n        }\n\n        if (typeof data[d.timeline] === 'undefined') {\n          continue;\n        }\n\n        data[d.timeline].schedule.push(d);\n      }\n\n      return data;\n    },\n\n    /**\n     * reset data\n     */\n    resetData: function resetData() {\n      return this.each(function () {\n        var $this = $(this);\n\n        var saveData = methods._loadData.apply($this);\n\n        saveData.schedule = [];\n\n        methods._saveData.apply($this, [saveData]);\n\n        $this.find('.sc_bar').remove();\n\n        for (var i in saveData.timeline) {\n          saveData.timeline[i].schedule = [];\n\n          methods._resizeRow.apply($this, [i, 0]);\n        }\n\n        methods._saveData.apply($this, [saveData]);\n      });\n    },\n\n    /**\n     * add schedule data\n     *\n     * @param {number} timeline\n     * @param {object} data\n     * @returns {methods}\n     */\n    addSchedule: function addSchedule(timeline, data) {\n      return this.each(function () {\n        var $this = $(this);\n        var d = {\n          start: data.start,\n          end: data.end,\n          startTime: methods.calcStringTime(data.start),\n          endTime: methods.calcStringTime(data.end),\n          text: data.text,\n          timeline: timeline\n        };\n\n        if (data.data) {\n          d.data = data.data;\n        }\n\n        methods._addScheduleData.apply($this, [timeline, d]);\n\n        methods._resetBarPosition.apply($this, [timeline]);\n      });\n    },\n\n    /**\n     * add schedule data\n     *\n     * @param {number} timeline\n     * @param {object} data\n     * @returns {methods}\n     */\n    addRow: function addRow(timeline, data) {\n      return this.each(function () {\n        var $this = $(this);\n\n        methods._addRow.apply($this, [timeline, data]);\n      });\n    },\n\n    /**\n     * clear row\n     *\n     * @returns {methods}\n     */\n    resetRowData: function resetRowData() {\n      return this.each(function () {\n        var $this = $(this);\n\n        var data = methods._loadData.apply($this);\n\n        data.schedule = [];\n        data.timeline = [];\n\n        methods._saveData.apply($this, [data]);\n\n        $this.find('.sc_bar').remove();\n        $this.find('.timeline').remove();\n        $this.find('.sc_data').height(0);\n      });\n    },\n\n    /**\n     * clear row\n     *\n     * @param {object} data\n     * @returns {methods}\n     */\n    setRows: function setRows(data) {\n      return this.each(function () {\n        var $this = $(this);\n        methods.resetRowData.apply($this, []);\n\n        for (var timeline in data) {\n          methods.addRow.apply($this, [timeline, data[timeline]]);\n        }\n      });\n    },\n\n    /**\n     * switch draggable\n     * @param {boolean} enable\n     */\n    setDraggable: function setDraggable(enable) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        if (enable !== setting.draggable) {\n          setting.draggable = enable;\n\n          methods._saveSettingData.apply($this, setting);\n\n          if (enable) {\n            $this.find('.sc_bar').draggable('enable');\n          } else {\n            $this.find('.sc_bar').draggable('disable');\n          }\n        }\n      });\n    },\n\n    /**\n     * switch resizable\n     * @param {boolean} enable\n     */\n    setResizable: function setResizable(enable) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        if (enable !== setting.resizable) {\n          setting.resizable = enable;\n\n          methods._saveSettingData.apply($this, setting);\n\n          if (enable) {\n            $this.find('.sc_bar').resizable('enable');\n          } else {\n            $this.find('.sc_bar').resizable('disable');\n          }\n        }\n      });\n    },\n\n    /**\n     * 現在のタイムライン番号を取得\n     *\n     * @param node\n     * @param top\n     * @returns {number}\n     */\n    _getTimeLineNumber: function _getTimeLineNumber(node, top) {\n      var $this = $(this);\n\n      var setting = methods._loadSettingData.apply($this);\n\n      var num = 0;\n      var n = 0;\n      var tn = Math.ceil(top / (setting.timeLineY + setting.timeLinePaddingTop + setting.timeLinePaddingBottom));\n\n      for (var i in setting.rows) {\n        var r = setting.rows[i];\n        var tr = 0;\n\n        if (_typeof(r.schedule) === 'object') {\n          tr = r.schedule.length;\n        }\n\n        if (node && node.timeline) {\n          tr++;\n        }\n\n        n += Math.max(tr, 1);\n\n        if (n >= tn) {\n          break;\n        }\n\n        num++;\n      }\n\n      return num;\n    },\n\n    /**\n     * 背景データ追加\n     *\n     * @param {ScheduleData} data\n     */\n    _addScheduleBgData: function _addScheduleBgData(data) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var st = Math.ceil((data.startTime - saveData.tableStartTime) / setting.widthTime);\n        var et = Math.floor((data.endTime - saveData.tableStartTime) / setting.widthTime);\n        var $bar = $('<div class=\"sc_bgBar\"><span class=\"text\"></span></div>');\n        $bar.css({\n          left: st * setting.widthTimeX,\n          top: 0,\n          width: (et - st) * setting.widthTimeX,\n          height: $this.find('.sc_main .timeline').eq(data.timeline).height()\n        });\n\n        if (data.text) {\n          $bar.find('.text').text(data.text);\n        }\n\n        if (data.class) {\n          $bar.addClass(data.class);\n        } // $element.find('.sc_main').append($bar);\n\n\n        $this.find('.sc_main .timeline').eq(data.timeline).append($bar);\n      });\n    },\n\n    /**\n     * スケジュール追加\n     *\n     * @param timeline\n     * @param {ScheduleData} d\n     * @returns {number}\n     */\n    _addScheduleData: function _addScheduleData(timeline, d) {\n      var data = d;\n      data.startTime = data.startTime ? data.startTime : methods.calcStringTime(data.start);\n      data.endTime = data.endTime ? data.endTime : methods.calcStringTime(data.end);\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var st = Math.ceil((data.startTime - saveData.tableStartTime) / setting.widthTime);\n        var et = Math.floor((data.endTime - saveData.tableStartTime) / setting.widthTime);\n        var $bar = $('<div class=\"sc_bar\"><span class=\"head\"><span class=\"time\"></span></span><span class=\"text\"></span></div>');\n        var stext = methods.formatTime(data.startTime);\n        var etext = methods.formatTime(data.endTime);\n\n        var snum = methods._getScheduleCount.apply($this, [data.timeline]);\n\n        $bar.css({\n          left: st * setting.widthTimeX,\n          top: snum * setting.timeLineY + setting.timeLinePaddingTop,\n          width: (et - st) * setting.widthTimeX,\n          height: setting.timeLineY\n        });\n        $bar.find('.time').text(stext + '-' + etext);\n\n        if (data.text) {\n          $bar.find('.text').text(data.text);\n        }\n\n        if (data.class) {\n          $bar.addClass(data.class);\n        } // $this.find('.sc_main').append($bar);\n\n\n        var $row = $this.find('.sc_main .timeline').eq(timeline);\n        $row.append($bar); // データの追加\n\n        saveData.schedule.push(data);\n\n        methods._saveData.apply($this, [saveData]); // コールバックがセットされていたら呼出\n\n\n        if (setting.onAppendSchedule) {\n          setting.onAppendSchedule.apply($this, [$bar, data]);\n        } // key\n\n\n        var key = saveData.schedule.length - 1;\n        $bar.data('sc_key', key);\n        $bar.on('mouseup', function () {\n          // コールバックがセットされていたら呼出\n          if (setting.onClick) {\n            if ($(this).data('dragCheck') !== true && $(this).data('resizeCheck') !== true) {\n              var $n = $(this);\n              var scKey = $n.data('sc_key');\n              setting.onClick.apply($this, [$n, saveData.schedule[scKey]]);\n            }\n          }\n        });\n        var $node = $this.find('.sc_bar');\n        var currentNode = null; // move node.\n\n        $node.draggable({\n          grid: [setting.widthTimeX, 1],\n          containment: $this.find('.sc_main'),\n          helper: 'original',\n          start: function start(event, ui) {\n            var node = {};\n            node.node = this;\n            node.offsetTop = ui.position.top;\n            node.offsetLeft = ui.position.left;\n            node.currentTop = ui.position.top;\n            node.currentLeft = ui.position.left;\n            node.timeline = methods._getTimeLineNumber.apply($this, [currentNode, ui.position.top]);\n            node.nowTimeline = node.timeline;\n            currentNode = node;\n          },\n\n          /**\n           *\n           * @param {Event} event\n           * @param {function} ui\n           * @returns {boolean}\n           */\n          drag: function drag(event, ui) {\n            $(this).data('dragCheck', true);\n\n            if (!currentNode) {\n              return false;\n            }\n\n            var $moveNode = $(this);\n            var scKey = $moveNode.data('sc_key');\n\n            var timelineNum = methods._getTimeLineNumber.apply($this, [currentNode, ui.position.top]); // eslint-disable-next-line no-param-reassign\n\n\n            ui.position.left = Math.floor(ui.position.left / setting.widthTimeX) * setting.widthTimeX;\n\n            if (currentNode.nowTimeline !== timelineNum) {\n              // 現在のタイムライン\n              currentNode.nowTimeline = timelineNum;\n            }\n\n            currentNode.currentTop = ui.position.top;\n            currentNode.currentLeft = ui.position.left; // テキスト変更\n\n            methods._rewriteBarText.apply($this, [$moveNode, saveData.schedule[scKey]]);\n\n            return true;\n          },\n          // 要素の移動が終った後の処理\n          stop: function stop() {\n            $(this).data('dragCheck', false);\n            currentNode = null;\n            var $n = $(this);\n            var scKey = $n.data('sc_key');\n            var x = $n.position().left; // var w = $n.width();\n\n            var start = saveData.tableStartTime + Math.floor(x / setting.widthTimeX) * setting.widthTime; // var end = saveData.tableStartTime + (Math.floor((x + w) / setting.widthTimeX) * setting.widthTime);\n\n            var end = start + (saveData.schedule[scKey].endTime - saveData.schedule[scKey].startTime);\n            saveData.schedule[scKey].start = methods.formatTime(start);\n            saveData.schedule[scKey].end = methods.formatTime(end);\n            saveData.schedule[scKey].startTime = start;\n            saveData.schedule[scKey].endTime = end; // コールバックがセットされていたら呼出\n\n            if (setting.onChange) {\n              setting.onChange.apply($this, [$n, saveData.schedule[scKey]]);\n            }\n          }\n        });\n        var resizableHandles = ['e'];\n\n        if (setting.resizableLeft) {\n          resizableHandles.push('w');\n        }\n\n        $node.resizable({\n          handles: resizableHandles.join(','),\n          grid: [setting.widthTimeX, setting.timeLineY - setting.timeBorder],\n          minWidth: setting.widthTimeX,\n          containment: $this.find('.sc_main_scroll'),\n          start: function start() {\n            var $n = $(this);\n            $n.data('resizeCheck', true);\n          },\n          resize: function resize(ev, ui) {\n            // box-sizing: border-box; に対応\n            ui.element.height(ui.size.height);\n            ui.element.width(ui.size.width);\n          },\n          // 要素の移動が終った後の処理\n          stop: function stop() {\n            var $n = $(this);\n            var scKey = $n.data('sc_key');\n            var x = $n.position().left;\n            var w = $n.outerWidth();\n            var start = saveData.tableStartTime + Math.floor(x / setting.widthTimeX) * setting.widthTime;\n            var end = saveData.tableStartTime + Math.floor((x + w) / setting.widthTimeX) * setting.widthTime;\n            var timelineNum = saveData.schedule[scKey].timeline;\n            saveData.schedule[scKey].start = methods.formatTime(start);\n            saveData.schedule[scKey].end = methods.formatTime(end);\n            saveData.schedule[scKey].startTime = start;\n            saveData.schedule[scKey].endTime = end; // 高さ調整\n\n            methods._resetBarPosition.apply($this, [timelineNum]); // テキスト変更\n\n\n            methods._rewriteBarText.apply($this, [$n, saveData.schedule[scKey]]);\n\n            $n.data('resizeCheck', false); // コールバックがセットされていたら呼出\n\n            if (setting.onChange) {\n              setting.onChange.apply($this, [$n, saveData.schedule[scKey]]);\n            }\n          }\n        });\n\n        if (setting.draggable === false) {\n          $node.draggable('disable');\n        }\n\n        if (setting.resizable === false) {\n          $node.resizable('disable');\n        }\n\n        return key;\n      });\n    },\n\n    /**\n     * スケジュール数の取得\n     *\n     * @param {number} n row number\n     * @returns {number}\n     */\n    _getScheduleCount: function _getScheduleCount(n) {\n      var $this = $(this);\n\n      var saveData = methods._loadData.apply($this);\n\n      var num = 0;\n\n      for (var i in saveData.schedule) {\n        if (saveData.schedule[i].timeline === n) {\n          num++;\n        }\n      }\n\n      return num;\n    },\n\n    /**\n     * add rows\n     *\n     * @param timeline\n     * @param row\n     */\n    _addRow: function _addRow(timeline, row) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var id = $this.find('.sc_main .timeline').length;\n        var html;\n        html = '';\n        html += '<div class=\"timeline\"></div>';\n        var $data = $(html);\n\n        if (row.title) {\n          $data.append('<span class=\"timeline-title\">' + row.title + '</span>');\n        }\n\n        if (row.subtitle) {\n          $data.append('<span class=\"timeline-subtitle\">' + row.subtitle + '</span>');\n        } // event call\n\n\n        if (setting.onInitRow) {\n          setting.onInitRow.apply($this, [$data, row]);\n        }\n\n        $this.find('.sc_data_scroll').append($data);\n        html = '';\n        html += '<div class=\"timeline\"></div>';\n        var $timeline = $(html);\n\n        for (var t = saveData.tableStartTime; t < saveData.tableEndTime; t += setting.widthTime) {\n          var $tl = $('<div class=\"tl\"></div>');\n          $tl.outerWidth(setting.widthTimeX);\n          $tl.data('time', methods.formatTime(t));\n          $tl.data('timeline', timeline);\n          $timeline.append($tl);\n        } // クリックイベント\n        // left click\n\n\n        $timeline.find('.tl').on('click', function () {\n          if (setting.onScheduleClick) {\n            setting.onScheduleClick.apply($this, [this, $(this).data('time'), $(this).data('timeline'), saveData.timeline[$(this).data('timeline')]]);\n          }\n        }); // right click\n\n        $timeline.find('.tl').on('contextmenu', function () {\n          if (setting.onScheduleClick) {\n            setting.onScheduleClick.apply($this, [this, $(this).data('time'), $(this).data('timeline'), saveData.timeline[$(this).data('timeline')]]);\n          }\n\n          return false;\n        });\n        $this.find('.sc_main').append($timeline);\n        saveData.timeline[timeline] = row;\n\n        methods._saveData.apply($this, [saveData]);\n\n        if (row.class && row.class !== '') {\n          $this.find('.sc_data .timeline').eq(id).addClass(row.class);\n          $this.find('.sc_main .timeline').eq(id).addClass(row.class);\n        } // スケジュールタイムライン\n\n\n        if (row.schedule) {\n          for (var i in row.schedule) {\n            var bdata = row.schedule[i];\n            var s = bdata.start ? bdata.start : methods.calcStringTime(bdata.startTime);\n            var e = bdata.end ? bdata.end : methods.calcStringTime(bdata.endTime);\n            var data = {};\n            data.start = s;\n            data.end = e;\n\n            if (bdata.text) {\n              data.text = bdata.text;\n            }\n\n            data.timeline = timeline;\n            data.data = {};\n\n            if (bdata.data) {\n              data.data = bdata.data;\n            }\n\n            methods._addScheduleData.apply($this, [id, data]);\n          }\n        } // 高さの調整\n\n\n        methods._resetBarPosition.apply($this, [id]);\n\n        $this.find('.sc_main .timeline').eq(id).droppable({\n          accept: '.sc_bar',\n          drop: function drop(ev, ui) {\n            var node = ui.draggable;\n            var scKey = node.data('sc_key');\n            var nowTimelineNum = saveData.schedule[scKey].timeline;\n            var timelineNum = $this.find('.sc_main .timeline').index(this); // タイムラインの変更\n\n            saveData.schedule[scKey].timeline = timelineNum;\n            node.appendTo(this); // 高さ調整\n\n            methods._resetBarPosition.apply($this, [nowTimelineNum]);\n\n            methods._resetBarPosition.apply($this, [timelineNum]);\n          }\n        }); // コールバックがセットされていたら呼出\n\n        if (setting.onAppendRow) {\n          $this.find('.sc_main .timeline').eq(id).find('.sc_bar').each(function () {\n            var $n = $(this);\n            var scKey = $n.data('sc_key');\n            setting.onAppendRow.apply($this, [$n, saveData.schedule[scKey]]);\n          });\n        }\n      });\n    },\n\n    /**\n     * テキストの変更\n     *\n     * @param {jQuery} node\n     * @param {Object} data\n     */\n    _rewriteBarText: function _rewriteBarText(node, data) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var x = node.position().left; // var w = node.width();\n\n        var start = saveData.tableStartTime + Math.floor(x / setting.widthTimeX) * setting.widthTime; // var end = saveData.tableStartTime + (Math.floor((x + w) / setting.widthTimeX) * setting.widthTime);\n\n        var end = start + (data.endTime - data.startTime);\n        var html = methods.formatTime(start) + '-' + methods.formatTime(end);\n        $(node).find('.time').html(html);\n      });\n    },\n\n    /**\n     *\n     * @param {Number} n\n     */\n    _resetBarPosition: function _resetBarPosition(n) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this); // 要素の並び替え\n\n\n        var $barList = $this.find('.sc_main .timeline').eq(n).find('.sc_bar');\n        var codes = [],\n            check = [];\n        var h = 0;\n        var $e1, $e2;\n        var c1, c2, s1, s2, e1, e2;\n        var i;\n\n        for (i = 0; i < $barList.length; i++) {\n          codes[i] = {\n            code: i,\n            x: $($barList[i]).position().left\n          };\n        } // ソート\n\n\n        codes.sort(function (a, b) {\n          if (a.x < b.x) {\n            return -1;\n          }\n\n          if (a.x > b.x) {\n            return 1;\n          }\n\n          return 0;\n        });\n\n        for (i = 0; i < codes.length; i++) {\n          c1 = codes[i].code;\n          $e1 = $($barList[c1]);\n\n          for (h = 0; h < check.length; h++) {\n            var next = false;\n\n            for (var j = 0; j < check[h].length; j++) {\n              c2 = check[h][j];\n              $e2 = $($barList[c2]);\n              s1 = $e1.position().left;\n              e1 = $e1.position().left + $e1.outerWidth();\n              s2 = $e2.position().left;\n              e2 = $e2.position().left + $e2.outerWidth();\n\n              if (s1 < e2 && e1 > s2) {\n                next = true;\n                continue;\n              }\n            }\n\n            if (!next) {\n              break;\n            }\n          }\n\n          if (!check[h]) {\n            check[h] = [];\n          }\n\n          $e1.css({\n            top: h * setting.timeLineY + setting.timeLinePaddingTop\n          });\n          check[h][check[h].length] = c1;\n        } // 高さの調整\n\n\n        methods._resizeRow.apply($this, [n, check.length]);\n      });\n    },\n\n    /**\n     *\n     * @param n\n     * @param height\n     */\n    _resizeRow: function _resizeRow(n, height) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var h = Math.max(height, 1);\n        $this.find('.sc_data .timeline').eq(n).outerHeight(h * setting.timeLineY + setting.timeLineBorder + setting.timeLinePaddingTop + setting.timeLinePaddingBottom);\n        $this.find('.sc_main .timeline').eq(n).outerHeight(h * setting.timeLineY + setting.timeLineBorder + setting.timeLinePaddingTop + setting.timeLinePaddingBottom);\n        $this.find('.sc_main .timeline').eq(n).find('.sc_bgBar').each(function () {\n          $(this).outerHeight($(this).closest('.timeline').outerHeight());\n        });\n        $this.find('.sc_data').outerHeight($this.find('.sc_main_box').outerHeight());\n      });\n    },\n\n    /**\n     * resizeWindow\n     */\n    _resizeWindow: function _resizeWindow() {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var scWidth = $this.width();\n        var scMainWidth = scWidth - setting.dataWidth - setting.verticalScrollbar;\n        var cellNum = Math.floor((saveData.tableEndTime - saveData.tableStartTime) / setting.widthTime);\n        $this.find('.sc_header_cell').width(setting.dataWidth);\n        $this.find('.sc_data,.sc_data_scroll').width(setting.dataWidth);\n        $this.find('.sc_header').width(scMainWidth);\n        $this.find('.sc_main_box').width(scMainWidth);\n        $this.find('.sc_header_scroll').width(setting.widthTimeX * cellNum);\n        $this.find('.sc_main_scroll').width(setting.widthTimeX * cellNum);\n      });\n    },\n\n    /**\n     * move all cells of the right of the specified time line cell\n     *\n     * @param timeline\n     * @param baseTimeLineCell\n     * @param moveWidth\n     */\n    _moveSchedules: function _moveSchedules(timeline, baseTimeLineCell, moveWidth) {\n      return this.each(function () {\n        var $this = $(this);\n\n        var setting = methods._loadSettingData.apply($this);\n\n        var saveData = methods._loadData.apply($this);\n\n        var $barList = $this.find('.sc_main .timeline').eq(timeline).find('.sc_bar');\n\n        for (var i = 0; i < $barList.length; i++) {\n          var $bar = $($barList[i]);\n\n          if (baseTimeLineCell.position().left <= $bar.position().left) {\n            var v1 = $bar.position().left + setting.widthTimeX * moveWidth;\n            var v2 = Math.floor((saveData.tableEndTime - saveData.tableStartTime) / setting.widthTime) * setting.widthTimeX - $bar.outerWidth();\n            $bar.css({\n              left: Math.max(0, Math.min(v1, v2))\n            });\n            var scKey = $bar.data('sc_key');\n            var start = saveData.tableStartTime + Math.floor($bar.position().left / setting.widthTimeX) * setting.widthTime;\n            var end = start + (saveData.schedule[scKey].end - saveData.schedule[scKey].start);\n            saveData.schedule[scKey].start = methods.formatTime(start);\n            saveData.schedule[scKey].end = methods.formatTime(end);\n            saveData.schedule[scKey].startTime = start;\n            saveData.schedule[scKey].endTime = end;\n\n            methods._rewriteBarText.apply($this, [$bar, saveData.schedule[scKey]]); // if setting\n\n\n            if (setting.onChange) {\n              setting.onChange.apply($this, [$bar, saveData.schedule[scKey]]);\n            }\n          }\n        }\n\n        methods._resetBarPosition.apply($this, [timeline]);\n      });\n    },\n\n    /**\n     * initialize\n     */\n    init: function init(options) {\n      return this.each(function () {\n        var $this = $(this);\n        var config = $.extend({\n          className: 'jq-schedule',\n          rows: {},\n          startTime: '07:00',\n          endTime: '19:30',\n          widthTimeX: 25,\n          // 1cell辺りの幅(px)\n          widthTime: 600,\n          // 区切り時間(秒)\n          timeLineY: 50,\n          // timeline height(px)\n          timeLineBorder: 1,\n          // timeline height border\n          timeBorder: 1,\n          // border width\n          timeLinePaddingTop: 0,\n          timeLinePaddingBottom: 0,\n          headTimeBorder: 1,\n          // time border width\n          dataWidth: 160,\n          // data width\n          verticalScrollbar: 0,\n          // vertical scrollbar width\n          bundleMoveWidth: 1,\n          // width to move all schedules to the right of the clicked time cell\n          draggable: true,\n          resizable: true,\n          resizableLeft: false,\n          // event\n          onInitRow: null,\n          onChange: null,\n          onClick: null,\n          onAppendRow: null,\n          onAppendSchedule: null,\n          onScheduleClick: null\n        }, options);\n\n        methods._saveSettingData.apply($this, [config]);\n\n        var tableStartTime = methods.calcStringTime(config.startTime);\n        var tableEndTime = methods.calcStringTime(config.endTime);\n        tableStartTime -= tableStartTime % config.widthTime;\n        tableEndTime -= tableEndTime % config.widthTime;\n\n        methods._saveData.apply($this, [{\n          tableStartTime: tableStartTime,\n          tableEndTime: tableEndTime\n        }]);\n\n        var html = '' + '<div class=\"sc_menu\">' + '\\n' + '<div class=\"sc_header_cell\"><span>&nbsp;</span></div>' + '\\n' + '<div class=\"sc_header\">' + '\\n' + '<div class=\"sc_header_scroll\"></div>' + '\\n' + '</div>' + '\\n' + '</div>' + '\\n' + '<div class=\"sc_wrapper\">' + '\\n' + '<div class=\"sc_data\">' + '\\n' + '<div class=\"sc_data_scroll\"></div>' + '\\n' + '</div>' + '\\n' + '<div class=\"sc_main_box\">' + '\\n' + '<div class=\"sc_main_scroll\">' + '\\n' + '<div class=\"sc_main\"></div>' + '\\n' + '</div>' + '\\n' + '</div>' + '\\n' + '</div>';\n        $this.append(html);\n        $this.addClass(config.className);\n        $this.find('.sc_main_box').on('scroll', function () {\n          $this.find('.sc_data_scroll').css('top', $(this).scrollTop() * -1);\n          $this.find('.sc_header_scroll').css('left', $(this).scrollLeft() * -1);\n        }); // add time cell\n        // var cellNum = Math.floor((tableEndTime - tableStartTime) / config.widthTime);\n\n        var beforeTime = -1;\n\n        for (var t = tableStartTime; t < tableEndTime; t += config.widthTime) {\n          if (beforeTime < 0 || Math.floor(beforeTime / 3600) !== Math.floor(t / 3600)) {\n            html = '';\n            html += '<div class=\"sc_time\">' + methods.formatTime(t) + '</div>';\n            var $time = $(html);\n            var cn = Number(Math.min(Math.ceil((t + config.widthTime) / 3600) * 3600, tableEndTime) - t);\n            var cellNum = Math.floor(cn / config.widthTime);\n            $time.width(cellNum * config.widthTimeX);\n            $this.find('.sc_header_scroll').append($time);\n            beforeTime = t;\n          }\n        }\n\n        $(window).on('resize', function () {\n          methods._resizeWindow.apply($this);\n        }).trigger('resize'); // addrow\n\n        for (var i in config.rows) {\n          methods._addRow.apply($this, [i, config.rows[i]]);\n        }\n      });\n    }\n  };\n  /**\n   *\n   * @param {Object|string} method\n   * @returns {jQuery|methods|*}\n   */\n  // eslint-disable-next-line no-param-reassign\n\n  $.fn.timeSchedule = function (method) {\n    // Method calling logic\n    if (methods[method]) {\n      return methods[method].apply(this, Array.prototype.slice.call(arguments, 1)); // eslint-disable-next-line no-else-return\n    } else if (_typeof(method) === 'object' || !method) {\n      return methods.init.apply(this, arguments);\n    }\n\n    $.error('Method ' + method + ' does not exist on jQuery.timeSchedule');\n    return this;\n  };\n})(jQuery);"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","PLUGIN_NAME","methods","calcStringTime","str","slice","split","Number","formatTime","val","i1","Math","floor","_saveSettingData","data","this","_loadSettingData","_saveData","d","extend","tableStartTime","tableEndTime","schedule","timeline","_loadData","scheduleData","$this","saveData","apply","timelineData","i","push","resetData","each","find","remove","_resizeRow","addSchedule","start","end","startTime","endTime","text","_addScheduleData","_resetBarPosition","addRow","_addRow","resetRowData","height","setRows","setDraggable","enable","setting","draggable","setResizable","resizable","_getTimeLineNumber","node","top","num","n","tn","ceil","timeLineY","timeLinePaddingTop","timeLinePaddingBottom","rows","r","tr","length","max","_addScheduleBgData","st","widthTime","et","$bar","css","left","widthTimeX","width","eq","class","addClass","append","stext","etext","snum","_getScheduleCount","onAppendSchedule","key","$node","on","$n","scKey","onClick","currentNode","resizableHandles","grid","containment","helper","event","ui","offsetTop","position","offsetLeft","currentTop","currentLeft","nowTimeline","drag","$moveNode","timelineNum","_rewriteBarText","stop","x","onChange","resizableLeft","handles","join","timeBorder","minWidth","resize","ev","element","size","w","outerWidth","row","id","html","$data","$timeline","title","subtitle","onInitRow","t","$tl","onScheduleClick","bdata","s","e","droppable","accept","drop","nowTimelineNum","index","appendTo","onAppendRow","$e1","c1","c2","s1","s2","e1","$barList","codes","check","h","code","sort","a","b","next","j","$e2","outerHeight","timeLineBorder","closest","_resizeWindow","scMainWidth","dataWidth","verticalScrollbar","cellNum","_moveSchedules","baseTimeLineCell","moveWidth","v1","v2","min","init","options","$time","config","className","headTimeBorder","bundleMoveWidth","beforeTime","scrollTop","scrollLeft","cn","window","trigger","fn","timeSchedule","method","Array","call","arguments","error","jQuery"],"mappings":"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"}